<div class="page-header">
  <h1>
    Заявления
    <small class="nowrap"><%= @entrant.full_name %></small>
  </h1>
</div>

<h2>Оформленные заявления</h2>

<table class="table table-striped table-condensed">
  <thead>
    <tr>
      <th class="text-muted">#</th>
      <th>Номер</th>
      <th>Направление</th>
      <th></th>
      <th>
        <%= link_to print_all_entrance_campaign_entrant_applications_path(@campaign, @entrant),
                    class: 'btn btn-info' do %>
          <span class="glyphicons print"></span>
        <% end %>
      </th>
    </tr>
  </thead>
  <% @applications.each do |a| %>
    <tr>
      <td class="text-muted"><%= a.id %></td>
      <td><%= a.number %></td>
      <td>
        <%= a.direction.new_code %>
        <%= a.direction.name %>
      </td>
      <td>
        <% if a.packed? %>
          <button class="btn btn-<%= a.original? ? 'success' : 'default' %>"
                  title="<%= a.original? ? 'Оригинал' : 'Копия' %> аттестата"
                  data-toggle="modal" data-target="#documents_packed">
            <% if a.original? %>
              <span class="glyphicons folder_flag"></span>
            <% else %>
              <span class="glyphicons folder_open"></span>
            <% end %>
          </button>

          <%= render partial: 'documents_packed', locals: { a: a } %>
        <% end %>
      </td>
      <td>
        <%= link_to print_entrance_campaign_entrant_application_path(@campaign, @entrant, a),
                    class: 'btn btn-default' do %>
          <span class="glyphicons print"></span>
        <% end %>
      </td>
    </tr>
  <% end %>
</table>

<%= @applications.inspect %>

<hr>

<% @entrant.applications.sort_by { |a|
     a.competitive_group_item.competitive_group.name }.each do |a| %>
  <h4><%= a.competitive_group_item.competitive_group.name %></h4>

  <div id="<%= dom_id(a.competitive_group_item.competitive_group) %>">
    <% if a.id %>
      <%= render partial: 'application', locals: { application: a } %>
    <% else %>
      <%= render partial: 'form', locals: { application: a } %>
    <% end %>
  </div>
<% end %>

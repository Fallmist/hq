<div class="page-header">
  <h1>
    Пофамильный список лиц, подавших документы, необходимые для поступления
  </h1>
</div>

<%= form_tag applications_entrance_campaign_path(@campaign), method: :get do %>
  <div class="row">
    <div class="col-sm-8">
      <%= select_tag :direction,
                     options_from_collection_for_select(
                       Direction.for_campaign(@campaign),
                       :id, :description, params[:direction]
                     ), class: 'form-control',
                     onchange: %q($(this).parents('form').submit();) %>
    </div>
    <div class="col-sm-2">
      <%= select_tag :form,
                     options_for_select(
                       [['очная', 11], ['очно-заочная', 12], ['заочная', 10]],
                       params[:form]
                     ), class: 'form-control',
                     onchange: %q($(this).parents('form').submit();) %>
    </div>
    <div class="col-sm-2">
      <%= select_tag :payment,
                     options_for_select(
                         [['бюджет', 14], ['платное', 15]],
                         params[:payment]
                     ), class: 'form-control',
                     onchange: %q($(this).parents('form').submit();) %>
    </div>
  </div>
<% end %>

<% if @applications.empty? %>
  <p>Нет ни одного заявления.</p>
<% else %>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>№</th>
        <th>Регистрационный номер</th>
        <th>Фамилия, имя, отчество</th>
        <th>Основание приёма</th>
      </tr>
    </thead>
    <% @applications.each_with_index do |application, i| %>
      <tr>
        <td><%= i + 1 %></td>
        <td><%= application.number %></td>
        <td><%= application.entrant.full_name %></td>
        <td><%= application.entrance_type %></td>
      </tr>
    <% end %>
  </table>
<% end %>
